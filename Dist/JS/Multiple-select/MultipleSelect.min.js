"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MultipleSelect=void 0;class SelectHeader{constructor(e){this.toggleSelectClass="Select--active",this.activeTextClass="Select__text--active",this.disableTextClass="Select__text--disabled",this._item=e,this._text=this._item.querySelector('[data-id="dz-inputText"]'),this.name=`${this._item.dataset.name||"(undefined name)"} select component`,this._headerHandle()}_headerSetText({innerHTML:e}){this._text.innerHTML=e}_headerHandle(){try{this._headerCheckForUser(),this._headerSetEvents()}catch(e){console.warn(e.message)}}_headerSetEvents(){this._item.onclick=this._headerClickHandler.bind(this),this._item.onblur=this._headerRemoveActive.bind(this)}_headerClickHandler(){this._item.classList.contains(this.toggleSelectClass)?this._headerRemoveActive():this._headerAddActive()}_headerAddActive(){this._item.classList.add(this.toggleSelectClass)}_headerRemoveActive(){this._item.classList.remove(this.toggleSelectClass)}_headerCheckForUser(){if(!this._item)throw new Error("Component is not found!");if(!this._text)throw new Error(`Input text in ${this.name} is not found!`)}}class MultipleSelect extends SelectHeader{constructor(e){super(e),this.value=[],this._input=this._item.querySelector('[data-id="dz-input"]'),this._values=this._item.querySelectorAll("[data-value]"),this._handle()}_handle(){try{this._checkForUser(),this._findChecked(),this._findDisabled(),this._setClickHandler()}catch(e){console.warn(e.message)}}_findChecked(){let e=!1;for(let t of this._values)void 0!==t.dataset.checked&&void 0===t.dataset.disabled&&(this._set(t),e=!0);if(!e)for(let e=0;e<this._values.length;e++)if(void 0===this._values[e].dataset.disabled)return void this._set(this._values[e])}_findDisabled(){for(let e of this._values)void 0!==e.dataset.disabled&&e.classList.add(this.disableTextClass)}_setClickHandler(){for(let e of this._values)void 0===e.dataset.disabled&&(e.onclick=this._clickHandler.bind(this,e))}_clickHandler(e){e.classList.contains(this.activeTextClass)?this._unset(e):this._set(e)}_headerSetText(){this._text.innerHTML=`${this.value.length}`}_set(e){void 0===e.dataset.disabled&&(e.classList.add(this.activeTextClass),e.dataset.checked="",this._setValue(e),this._headerSetText())}_unset(e){void 0===e.dataset.disabled&&(e.classList.remove(this.activeTextClass),e.dataset.checked=void 0,this._unsetValue(e),this._headerSetText())}_setValue({dataset:e}){this.value.push(e.value),this._input.value=JSON.stringify(this.value),this._input.dispatchEvent(new Event("change"))}_unsetValue({dataset:e}){this.value=this.value.filter(t=>t!=e.value),this._input.value=JSON.stringify(this.value)}_checkForUser(){if(void 0===this._item.dataset.multiple)throw new Error(`${this.name} will has data-multiple attribute!`);if(!this._input)throw new Error(`Input in ${this.name} is not found!`);if(!this._values.length)throw new Error(`Values in ${this.name} are not found!`);console.info(`${this.name} is ready.`)}}exports.MultipleSelect=MultipleSelect,exports.default=MultipleSelect;